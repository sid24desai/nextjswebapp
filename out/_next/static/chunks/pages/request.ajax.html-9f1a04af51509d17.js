(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[731],{3155:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/request.ajax.html",function(){return n(2269)}])},2269:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return request_ajax_html}});var a=n(5893),s=n(9008),r=n.n(s),o=n(1664),i=n.n(o),l=n(7294),c=n(5021),u=n(9437),_=n.n(u),g=n(9669),h=n.n(g);let CacheReq=class CacheReq{memoize(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=arguments;return function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return{params:[a[0].name,t],fn:a[0]}}}async connect(e,t){for(var n=arguments.length,a=Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s];let{enable:r,autoClear:o,clearDelay:i,maxTimeout:l,entry:c}=e,u=void 0===r||r,_=void 0!==l?l:10,g=o,h=i,m=a[0],E=JSON.stringify(a).replace(/\s/g,"_").replace(/[^a-zA-Z0-9 \u4E00-\u9FFF]/g,""),d=c+"-"+JSON.stringify(a[1]).replace(/\s/g,"_").replace(/[^a-zA-Z0-9 \u4E00-\u9FFF]/g,""),N=Date.now(),f="".concat(this.SPACE_NAME).concat(m+"-"+E),C=sessionStorage.getItem(this.GLOBAL_CONFIG_PREFIX+d);null!==C&&(u=void 0===JSON.parse(C).enable||JSON.parse(C).enable,_=void 0!==JSON.parse(C).maxTimeout?JSON.parse(C).maxTimeout:10,g=JSON.parse(C).autoClear,h=JSON.parse(C).clearDelay);let S=sessionStorage.getItem(this.CACHE_DURATION);if(null===S)sessionStorage.setItem(this.CACHE_DURATION,Date.now());else{let e=Date.now()-parseFloat(S),t=new Date(e-288e5);t.getHours();let n=t.getMinutes();t.getSeconds(),n>_&&(this.clear(),sessionStorage.removeItem(this.CACHE_DURATION))}let A=sessionStorage.getItem(f);if(null!==A&&"undefined"!=A&&u){let e=JSON.parse(A);return console.log("cache (".concat(e.runtime,"): "),f),e.data}let O=Date.now(),I=await t();if(!u)return I;let p=Date.now()-O;this.RUN_TIME="".concat(p,"ms"),sessionStorage.setItem(f,JSON.stringify({runtime:this.RUN_TIME,data:I}));let w=Date.now(),x=w-N,y=20*x;return y>5e3&&(y=5e3),!0===g&&setTimeout(()=>{sessionStorage.removeItem(f)},h&&!isNaN(h)?h+x:y),I}clear(){let e={...sessionStorage},t=Object.keys(e).filter(e=>e.indexOf(this.SPACE_NAME)>=0);t.forEach(e=>{sessionStorage.removeItem(e)})}constructor(){this.SPACE_NAME="CACHE_REQ__",this.GLOBAL_CONFIG_PREFIX="CACHE_REQ_GLOBAL_CONFIG__",this.CACHE_DURATION="CACHE_REQ_DURATION",this.RUN_TIME=null}};let m=new CacheReq,MainContent=e=>(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("ul",{children:e.loading?(0,a.jsx)(a.Fragment,{children:"Loading..."}):e.data.map(e=>(0,a.jsx)("li",{children:(0,a.jsx)(i(),{href:"/posts/".concat(e.name,".html"),dangerouslySetInnerHTML:{__html:"".concat(e.name," - (region: ").concat(e.region,")")}})},e.name))})}),todoGetList=()=>new Promise((e,t)=>{h().get(_().RECEIVE_DEMO_LIST).then(t=>{e(t)})}),getList=async()=>{let e=m.memoize(todoGetList)(),[t,n]=e.params,a=await m.connect({autoClear:!1,clearDelay:null,entry:"getList"},async()=>{let t=await e.fn(...n);return t},t,n);return a};var request_ajax_html=()=>{let[e,t]=(0,l.useState)([]),[n,s]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{let fetchPost=async()=>{try{let e=await getList();s(!1),t(e.data)}catch(e){console.log(e)}};fetchPost()},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r(),{children:(0,a.jsx)("title",{children:"Posts"})}),(0,a.jsx)(c.Z,{pageTitle:"Posts",contentComponent:(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(MainContent,{data:e,loading:n})})})]})}}},function(e){e.O(0,[61,21,774,888,179],function(){return e(e.s=3155)}),_N_E=e.O()}]);