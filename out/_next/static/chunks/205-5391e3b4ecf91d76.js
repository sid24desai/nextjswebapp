(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[205],{6673:function(e,t,n){"use strict";n.d(t,{Z:function(){return Datalist}});var a=n(5893),l=n(7294),i=n(2038),r=n(8867),d=n.n(r);function Modal(e){let{show:t,modalId:n,targetId:l,title:i,content:r,showClickEvent:s,closeClickEvent:o,gotoIdClickEvent:c}=e;function handleShow(e){e.preventDefault(),"function"==typeof c&&c(l),"function"==typeof s&&s()}function handleClose(e){e.preventDefault(),e.stopPropagation(),"function"==typeof o&&o()}return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("a",{className:d()["modal-trigger"],href:"#",onClick:handleShow,children:i}),(0,a.jsx)("div",{id:n,className:d().modal,onClick:handleClose,style:{display:t?"flex":"none"},children:(0,a.jsxs)("div",{className:d()["modal-content"],onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("a",{href:"#",className:d()["modal-close"],onClick:handleClose,children:"\xd7"}),(0,a.jsx)("div",{className:d()["modal-flex"],children:(0,a.jsx)("div",{children:r})})]})})]})}function detailTable(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return(0,a.jsx)("table",{children:(0,a.jsxs)("tbody",{children:[(0,a.jsxs)("tr",{style:{display:""!=e?"table-row":"none"},children:[(0,a.jsx)("td",{width:"138",align:"right",children:(0,a.jsx)("strong",{children:"ID: "})}),(0,a.jsx)("td",{children:e})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{width:"138",align:"right",children:(0,a.jsx)("strong",{children:"Name: "})}),(0,a.jsx)("td",{children:t})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{width:"138",align:"right",children:(0,a.jsx)("strong",{children:"Email: "})}),(0,a.jsx)("td",{children:n})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{width:"138",align:"right",children:(0,a.jsx)("strong",{children:"Avatar: "})}),(0,a.jsx)("td",{children:l})]})]})})}var Datalist=()=>{let[e,t]=(0,l.useState)([]),[n,r]=(0,l.useState)({display:!1,content:"loading..."}),[d,s]=(0,l.useState)({display:!1,content:"loading..."}),[o,c]=(0,l.useState)({display:!1,content:"loading...",fieldName:"",fieldEmail:"",fieldAvatar:""});async function getAll(){t((await i.Z.getAll()).data.data)}async function get(e){let t=await i.Z.get(e),l=t.data.data;r({display:!n.display,content:detailTable(l.id,l.name,l.email,(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("img",{src:l.avatar,width:"100"})}))})}let h=(0,l.useCallback)(e=>t=>{t.preventDefault(),console.log("detail id: ",e),get(e)},[]);function handleAddForm(e){e.preventDefault();let t=(0,a.jsxs)("form",{tabIndex:-1,method:"post",style:{padding:"20px"},children:[detailTable(!1,(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("input",{type:"text",size:20,name:"name"})}),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("input",{type:"text",size:20,name:"email"})}),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("input",{type:"text",size:35,name:"avatar",placeholder:"http://"})})),(0,a.jsx)("input",{style:{padding:"5px 15px",background:"rgb(57 57 57)",outline:"none",color:"#fff",borderRadius:"30px",border:"none",fontSize:"12px",marginLeft:"142px"},type:"button",value:"Submit",onClick:p("add")})]});s({display:!0,content:t})}async function getUpdateId(e){let t=await i.Z.get(e),n=t.data.data,l=(0,a.jsxs)("form",{tabIndex:-1,style:{padding:"20px"},children:[detailTable(!1,(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("input",{type:"text",size:20,name:"name",defaultValue:n.name})}),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("input",{type:"email",size:20,name:"email",defaultValue:n.email})}),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("input",{type:"text",size:35,name:"avatar",placeholder:"http://",defaultValue:n.avatar})})),(0,a.jsx)("input",{style:{padding:"5px 15px",background:"rgb(57 57 57)",outline:"none",color:"#fff",borderRadius:"30px",border:"none",fontSize:"12px",marginLeft:"142px"},type:"button",value:"Update",onClick:p("edit",e)})]});c({display:!o.display,content:l,fieldName:n.name,fieldEmail:n.email,fieldAvatar:n.avatar})}let u=(0,l.useCallback)(e=>t=>{t.preventDefault(),console.log("update id: ",e),getUpdateId(e)},[]);async function remove(e){200===(await i.Z.remove(e)).data.code&&getAll()}function handleDelete(e){console.log("delete id: ",e),remove(e)}let p=(0,l.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return n=>{n.preventDefault();let a=n.target.closest("form"),l=Array.prototype.slice.call(a.querySelectorAll("input")),r={};l.forEach(e=>{"button"!==e.type&&(r[e.name]=e.value)}),l.forEach(e=>{e.disabled=!0});let d=new FormData,o={action:"add"===e?"add_new_post":"add_edit_post",...r};for(let e in console.log("formData: ",o),o)d.append(e,o[e]);let refreshList=()=>{l.forEach(e=>{e.value="",e.disabled=!1}),getAll()};"add"===e&&i.Z.create(d).then(e=>{200===e.data.code&&(s({display:!1}),refreshList())}),"edit"===e&&i.Z.update(t,d).then(e=>{200===e.data.code&&(c({display:!1}),refreshList())})}},[]);return(0,l.useEffect)(()=>{getAll()},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("h4",{children:["Data \xa0\xa0\xa0\xa0",(0,a.jsx)("a",{style:{padding:"7px 25px",background:"#191919",outline:"none",color:"#fff",borderRadius:"30px",border:"none",fontSize:"14px",textDecoration:"none"},href:"#",onClick:handleAddForm,children:"Add New"})]}),(0,a.jsx)("hr",{}),(0,a.jsx)("ul",{children:e?e.map(e=>(0,a.jsxs)("li",{children:[(0,a.jsxs)("a",{href:"#",onClick:h(e.id),children:["(",e.id,") ",e.name," - ",e.email]}),(0,a.jsxs)("div",{style:{float:"right"},children:[(0,a.jsx)("a",{href:"#",onClick:u(e.id),children:(0,a.jsx)("svg",{version:"1.1",height:"15",x:"0px",y:"0px",viewBox:"0 0 1000 1000",enableBackground:"new 0 0 1000 1000",xmlSpace:"preserve",children:(0,a.jsxs)("g",{children:[(0,a.jsx)("path",{d:"M470.1,744.4L277.9,552.2L797.8,32.3L990,224.5L470.1,744.4z M345.9,552.2l124.3,124.3l452-452L797.8,100.2L345.9,552.2z"}),(0,a.jsx)("path",{d:"M238.6,576l207.6,207.6l-222.4,14.8L238.6,576z"}),(0,a.jsx)("path",{d:"M889.6,967.7H10V75h524.4v48H58v796.6h783.6V521.4h48V967.7z"})]})})}),"\xa0\xa0",(0,a.jsx)(Modal,{modalId:"modal-del-"+e.id,targetId:e.id,title:(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("svg",{height:"15",version:"1.1",x:"0px",y:"0px",viewBox:"0 0 1000 1000",enableBackground:"new 0 0 1000 1000",xmlSpace:"preserve",children:(0,a.jsx)("g",{children:(0,a.jsx)("path",{d:"M653.1,867.5c16.8,0,30.6-13.8,30.6-30.6V469.4c0-16.8-13.8-30.6-30.6-30.6c-16.8,0-30.6,13.8-30.6,30.6v367.5C622.5,853.7,636.3,867.5,653.1,867.5z M346.9,867.5c16.8,0,30.6-13.8,30.6-30.6V469.4c0-16.8-13.8-30.6-30.6-30.6s-30.6,13.8-30.6,30.6v367.5C316.3,853.7,330,867.5,346.9,867.5z M836.9,132.5H653.1V71.3c0-33.7-27.6-61.3-61.3-61.3H408.1c-33.7,0-61.3,27.6-61.3,61.3v61.3H163.1c-33.7,0-61.3,27.6-61.3,61.3V255c0,33.7,27.6,61.3,61.3,61.3v551.3c0,67.4,55.1,122.5,122.5,122.5h428.8c67.4,0,122.5-55.1,122.5-122.5V316.3c33.7,0,61.3-27.6,61.3-61.3v-61.2C898.1,160.1,870.6,132.5,836.9,132.5z M408.1,101.9c0-16.8,13.8-30.6,30.6-30.6h122.5c16.8,0,30.6,13.8,30.6,30.6v30.6c-29.9,0-183.8,0-183.8,0V101.9z M775.6,867.5c0,33.7-27.6,61.3-61.3,61.3H285.6c-33.7,0-61.3-27.6-61.3-61.3V316.3h551.3V867.5z M806.3,255H193.8c-16.8,0-30.6-13.8-30.6-30.6s13.8-30.6,30.6-30.6h612.5c16.8,0,30.6,13.8,30.6,30.6S823.1,255,806.3,255z M500,867.5c16.8,0,30.6-13.8,30.6-30.6V469.4c0-16.8-13.8-30.6-30.6-30.6s-30.6,13.8-30.6,30.6v367.5C469.4,853.7,483.2,867.5,500,867.5z"})})})}),content:(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("p",{children:["You will delete this post via ID ",e.id,". ",(0,a.jsx)("br",{}),(0,a.jsx)("a",{href:"#",onClick:t=>{t.preventDefault(),handleDelete(e.id)},children:"Are you sure?"})]})}),showClickEvent:()=>{let t=document.querySelector("#modal-del-"+e.id);t.style.display="flex"},closeClickEvent:()=>{let t=document.querySelector("#modal-del-"+e.id);t.style.display="none"}})]})]},e.id)):(0,a.jsx)(a.Fragment,{children:"Loading..."})}),(0,a.jsx)(Modal,{show:n.display,modalId:"modal-detail-container",targetId:9997,title:null,content:n.content,closeClickEvent:()=>{r({display:!1})}}),(0,a.jsx)(Modal,{show:d.display,modalId:"modal-form-add-container",targetId:9998,title:null,content:d.content,closeClickEvent:()=>{s({display:!1})}}),(0,a.jsx)(Modal,{show:o.display,modalId:"modal-form-edit-container",targetId:9999,title:null,content:o.content,closeClickEvent:()=>{c({display:!1})}})]})}},9299:function(e,t,n){"use strict";n.d(t,{Z:function(){return Dashboard_Userinfo}});var a=n(5893),l=n(7294),i=n(9669),r=n.n(i),d=n(9437),s=n.n(d),auth_header=function(){let e=JSON.parse(localStorage.getItem("SITE_DATA_AUTH"));return e&&e.token?{Authorization:"Bearer "+e.token}:{}},o=n(9170),c=n.n(o),is_admin=function(){let e=c().return("getCookie","SITE_DATA_LOGIN_COOKIE");return(null==e||0==e)&&localStorage.removeItem("SITE_DATA_AUTH"),"{}"!==JSON.stringify(auth_header())};let UserService=class UserService{deveProcess(e,t){return{curUrl:e,curConfig:t}}getUserName(){if(!is_admin())return null;this.config={headers:{...auth_header(),"Content-Type":"application/json"}};let{curUrl:e}=this.deveProcess(this.url,this.config),{curConfig:t}=this.deveProcess(this.url,this.config);return r().post(e,{},t).then(function(e){let t=e.data;return t.data?t.data.name:null})}constructor(){this.url=s().USER_AUTHENTICATE,this.config={}}};var h=new UserService,Dashboard_Userinfo=()=>{let[e,t]=(0,l.useState)("");return(0,l.useEffect)(()=>{var e;null===(e=h.getUserName())||void 0===e||e.then(function(e){t(e)})},[]),(0,a.jsx)(a.Fragment,{children:""!==e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{style:{color:"green"},children:"âˆš You need to be authorized after successful login to see this information."}),(0,a.jsxs)("p",{children:["Your user name is: ",(0,a.jsx)("code",{children:e})]}),(0,a.jsx)("hr",{})]}):null})}},2038:function(e,t,n){"use strict";var a=n(9669),l=n.n(a),i=n(9437),r=n.n(i);let CRUDService=class CRUDService{initData(){return l().get(r().CRUD_DATA_INIT,{},this.config)}getAll(){return l().get("".concat(this.url),{},this.config)}get(e){return l().get("".concat(this.url,"?type=get&id=").concat(e),{},this.config)}create(e){return this.config={headers:{"Content-Type":"multipart/form-data"}},l().post("".concat(this.url,"?type=create"),e,this.config)}update(e,t){return this.config={headers:{"Content-Type":"multipart/form-data"}},l().post("".concat(this.url,"?type=update&id=").concat(e),t,this.config)}remove(e){return l().delete("".concat(this.url,"?type=remove&id=").concat(e),{},this.config)}constructor(){this.url=r().CRUD_SERVICE,this.config={}}};t.Z=new CRUDService},9012:function(e,t,n){"use strict";var a=n(7294),l=n(8002);t.Z=()=>(0,a.useContext)(l.Z)},8867:function(e){e.exports={modal:"styles_modal__i8awT","modal-content":"styles_modal-content__1hInY","modal-flex":"styles_modal-flex__rzvaE","modal-close":"styles_modal-close__n532z"}}}]);